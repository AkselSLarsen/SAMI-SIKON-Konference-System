@page
@using SAMI_SIKON.Model;
@model IndexModel
@{
    ViewData["Title"] = "Overview";
}

<div class="day_selector">
    <div class="border border-dark" style="margin-top:1vh;overflow:hidden;">
        
        <form method="post" asp-page-handler="First">
            <input type="hidden" asp-for="@Model.Date" /> <!--ensure that Date is in scope-->
            <div style="text-align:center;width:20%;float:left;">
                <input class="border border-primary btn" type="submit" value="First day" />
            </div>
        </form>

        <form method="post" asp-page-handler="Previous">
            <input type="hidden" asp-for="@Model.Date" /> <!--ensure that Date is in scope-->
            <div style="text-align:center;width:20%;float:left;">
                <input class="border border-primary btn" type="submit" value="Previous day" />
            </div>
        </form>

        <form method="post" asp-page-handler="Today">
            <input type="hidden" asp-for="@Model.Date" /> <!--ensure that Date is in scope-->
            <div style="text-align:center;width:20%;float:left;">
                <input class="border border-primary btn" type="submit" value="Today" />
            </div>
        </form>

        <form method="post" asp-page-handler="Next">
            <input type="hidden" asp-for="@Model.Date" /> <!--ensure that Date is in scope-->
            <div style="text-align:center;width:20%;float:left;">
                <input class="border border-primary btn" type="submit" value="Next day" />
            </div>
        </form>

        <form method="post" asp-page-handler="Last">
            <input type="hidden" asp-for="@Model.Date" /> <!--ensure that Date is in scope-->
            <div style="text-align:center;width:20%;float:left;">
                <input class="border border-primary btn" type="submit" value="Last day" />
            </div>
        </form>

    </div>
</div>

<div style="height:100vh;">

    <div class="time_column" style="float:left;position:relative;">
        @foreach (int i in Model.GetHourIndicators()) {
            <p class="border border-info btn time_indicator" style="position:absolute;Top:@Model.GetTimeIndicatorOffset(i)">@i:00</p>
        }
    </div>


    @for (int i = 0; i < Model.NrOfTracks; i++) {
        <div class="event_track" style="height:100vh;float:right;width:@Model.TrackWidth();">

            @foreach (Event evt in Model.Tracks[i]) {

                <a asp-page="/Events/Event" asp-route-id="@evt.Id">
                    <div class="overview_event btn-block" style="cursor:pointer;border-bottom:1px solid black;background-color:@Model.ThemeToColor(evt);top:@Model.GetOffset(evt);height:@Model.GetDuration(evt);">
                        <p>@evt.Name<br>From: @Model.GetStartTime(evt) To: @Model.GetStopTime(evt)</p>
                    </div>
                </a>

            }

        </div>
    }


</div>
